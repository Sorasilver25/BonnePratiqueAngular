<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NestJS - Cr√©ation d'un Endpoint S√©curis√©</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div>
      <strong>üìö Documentation Angular &amp; NestJS</strong>
    </div>
    <nav class="navbar">
      <a href="index.html">Accueil</a>
      <a href="svg-icon-service.html">Service SVG Icons</a>
      <a href="endpoint-securise.html" class="active">Endpoint S√©curis√©</a>
    </nav>
  </header>

  <main>
    <h1>üìò NestJS - Cr√©ation d'un Endpoint S√©curis√©</h1>

    <section>
      <h2>üéØ Objectif de ce chapitre</h2>
      <p>D√©couvrir comment cr√©er un <strong>endpoint s√©curis√©</strong> dans une application NestJS, en utilisant les concepts de contr√¥leur, service, mod√®le (DTO), et guard d'acc√®s.</p>
    </section>

    <section>
      <h2>1Ô∏è‚É£ Contr√¥leur : D√©finir un Endpoint</h2>
      <p>Le contr√¥leur re√ßoit les requ√™tes HTTP et d√©l√®gue le traitement aux services. Exemple g√©n√©rique :</p>
      <pre><code><span class="purple">@Get</span>("/endpoint")
<span class="purple">@UseGuards</span>(new AccessGuard("droit-lecture"))
<span class="blue">public async</span> <span class="lightblue">getData</span>(<span class="lightblue">@Query()</span> params: FilterParams) {
  <span class="purple">return await</span> this.monService.getData(params);
}</code></pre>
    </section>

    <section>
      <h2>2Ô∏è‚É£ Service : Logique M√©tier</h2>
      <p>Le service contient la logique m√©tier et interagit avec les mod√®les ou d'autres services.</p>
      <pre><code><span class="blue">public async</span> <span class="lightblue">getData</span>(params: FilterParams): <span class="green">Promise&lt;DataModel&gt;</span> {
  <span class="lightblue">const</span> result = <span class="purple">await</span> this.repository.find(params);
  <span class="purple">return</span> result;
}</code></pre>
    </section>

    <section>
      <h2>3Ô∏è‚É£ Mod√®les (DTO/Interfaces)</h2>
      <p>Les mod√®les d√©finissent la structure des donn√©es √©chang√©es.</p>
      <pre><code><span class="purple">export interface</span> <span class="green">DataModel</span> {
  id: <span class="blue">string</span>;
  name: <span class="blue">string</span>;
  // ...autres propri√©t√©s...
}</code></pre>
    </section>

    <section>
      <h2>4Ô∏è‚É£ Guard d'acc√®s : S√©curiser l'Endpoint</h2>
      <p>Un guard permet de restreindre l'acc√®s √† certains endpoints selon des droits ou r√¥les.</p>
      <pre><code><span class="purple">export class</span> <span class="blue">AccessGuard</span> <span class="purple">implements</span> <span class="blue">CanActivate</span> {
  <span class="blue">constructor</span>(private droit: <span class="blue">string</span>) {}
  <span class="blue">canActivate</span>() {
    <span class="purple">// V√©rifier les droits de l'utilisateur</span>
    <span class="purple">return</span> true; <span class="purple">// ou false</span>
  }
}</code></pre>
    </section>

    <section>
      <h2>üõ°Ô∏è R√©sum√©</h2>
      <ul>
        <li><strong>Contr√¥leur</strong> : re√ßoit la requ√™te et appelle le service</li>
        <li><strong>Service</strong> : traite la logique m√©tier</li>
        <li><strong>Mod√®le</strong> : structure des donn√©es</li>
        <li><strong>Guard</strong> : s√©curise l'acc√®s</li>
      </ul>
      <p>Ce sch√©ma s'applique √† tout type d'endpoint dans NestJS, pour garantir une architecture claire et s√©curis√©e.</p>
    </section>
  </main>

  <footer>
    ¬© 2024 Documentation Angular &amp; NestJS ‚Äî Site statique p√©dagogique
  </footer>
</body>
</html>
